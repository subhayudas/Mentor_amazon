# MentorConnect - Critical Fixes & Improvements

## Current State & Issues

The MentorConnect platform has been developed but currently faces several critical issues that need immediate attention before the demo. The Calendly integration is completely broken and unable to connect to calendars, the analytics dashboard shows no data, mentor profile images are too cartoon-like and unprofessional, and there's no clear confirmation that user profiles are actually being saved. Additionally, the Amazon branding needs refinement with the correct logo variant, and the overall user experience needs polish to create seamless visual flow.

This document outlines all necessary fixes, improvements, and enhancements needed to make the platform demo-ready. Each section includes detailed implementation guidance with code examples, design specifications, and user experience considerations.

---

## CRITICAL FIXES (Priority 1 - Must Complete Today)

### 1. Calendly Integration - Complete Overhaul

**Current Problem**: The Calendly widget is not loading, cannot find calendars, and throws errors when users click "Book a Meeting". This completely breaks the core functionality of the platform.

**Root Causes**:
- Mentor Calendly URLs may not be in the correct format (must be exact event type URL like `https://calendly.com/username/30min`)
- Calendar permissions not properly configured in Calendly account settings
- Missing error handling when Calendly widget fails to load
- No support for multiple meeting durations (15/30/60 minutes)

**Complete Solution**:

First, ensure every mentor has three separate Calendly event types configured:
- 15-minute session: `https://calendly.com/mentor-name/15min`
- 30-minute session: `https://calendly.com/mentor-name/30min`
- 60-minute session: `https://calendly.com/mentor-name/60min`

Update the database schema to store these three URLs separately:
```sql
ALTER TABLE mentors ADD COLUMN calendly_15min TEXT;
ALTER TABLE mentors ADD COLUMN calendly_30min TEXT;
ALTER TABLE mentors ADD COLUMN calendly_60min TEXT;
```

Implement a duration selector in the booking UI:
```jsx
function BookingModal({ mentor, mentee, onClose }) {
  const [selectedDuration, setSelectedDuration] = useState(30);
  const [calendlyLoaded, setCalendlyLoaded] = useState(false);
  
  const calendlyUrl = {
    15: mentor.calendly_15min,
    30: mentor.calendly_30min,
    60: mentor.calendly_60min
  }[selectedDuration];
  
  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div className="bg-white rounded-xl shadow-2xl w-full max-w-4xl h-[80vh] flex flex-col">
        
        {/* Header */}
        <div className="p-6 border-b border-gray-200 flex items-center justify-between">
          <div className="flex items-center gap-4">
            <img 
              src={mentor.photo_url} 
              alt={mentor.name}
              className="w-16 h-16 rounded-full object-cover"
            />
            <div>
              <h2 className="text-2xl font-bold text-[#232F3E]">
                Book a Session with {mentor.name}
              </h2>
              <p className="text-gray-600">
                {mentor.position} @ {mentor.company}
              </p>
            </div>
          </div>
          <button 
            onClick={onClose}
            className="text-gray-400 hover:text-gray-600 text-3xl"
          >
            √ó
          </button>
        </div>
        
        {/* Duration Selector */}
        <div className="p-6 border-b border-gray-200 bg-gray-50">
          <p className="text-sm font-semibold text-gray-700 mb-3">
            Select Session Duration
          </p>
          <div className="flex gap-3">
            {[15, 30, 60].map(duration => (
              <button
                key={duration}
                onClick={() => setSelectedDuration(duration)}
                className={`flex-1 py-3 px-6 rounded-lg font-semibold transition-all ${
                  selectedDuration === duration
                    ? 'bg-[#FF9900] text-white shadow-lg'
                    : 'bg-white text-gray-700 border-2 border-gray-200 hover:border-[#FF9900]'
                }`}
              >
                {duration} Minutes
              </button>
            ))}
          </div>
        </div>
        
        {/* Calendly Widget */}
        <div className="flex-1 overflow-hidden relative">
          {!calendlyLoaded && (
            <div className="absolute inset-0 flex items-center justify-center bg-white">
              <div className="text-center">
                <div className="animate-spin rounded-full h-16 w-16 border-b-2 border-[#FF9900] mx-auto mb-4"></div>
                <p className="text-gray-600">Loading calendar...</p>
              </div>
            </div>
          )}
          
          <InlineWidget
            url={calendlyUrl}
            prefill={{
              name: mentee.name,
              email: mentee.email,
              customAnswers: {
                a1: mentee.timezone || 'UTC+2',
                a2: mentee.linkedin_url || 'Not provided'
              }
            }}
            pageSettings={{
              backgroundColor: 'ffffff',
              hideEventTypeDetails: false,
              hideLandingPageDetails: false,
              primaryColor: 'ff9900',
              textColor: '232f3e',
              hideGdprBanner: true
            }}
            styles={{
              height: '100%',
              width: '100%'
            }}
            onDateAndTimeSelected={() => {
              console.log('Time slot selected');
            }}
            onEventScheduled={(e) => {
              console.log('Event scheduled!', e);
              // Track booking
              fetch('/api/bookings', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                  mentor_id: mentor.id,
                  mentee_id: mentee.id,
                  calendly_event_uri: e.data.payload.event.uri,
                  scheduled_at: e.data.payload.event.start_time,
                  duration: selectedDuration,
                  status: 'scheduled'
                })
              });
              
              // Show success message
              toast.success('Meeting booked successfully! Check your email for details.');
              setTimeout(() => onClose(), 2000);
            }}
            onLoad={() => setCalendlyLoaded(true)}
          />
        </div>
        
        {/* Fallback for errors */}
        {calendlyLoaded === false && (
          <div className="p-6 text-center">
            <p className="text-sm text-gray-500">
              Having trouble? 
              <a 
                href={calendlyUrl} 
                target="_blank" 
                rel="noopener noreferrer"
                className="text-[#FF9900] font-semibold ml-1"
              >
                Open Calendly directly
              </a>
            </p>
          </div>
        )}
        
      </div>
    </div>
  );
}
```

Add error boundary for Calendly failures:
```jsx
class CalendlyErrorBoundary extends React.Component {
  state = { hasError: false };
  
  static getDerivedStateFromError(error) {
    return { hasError: true };
  }
  
  render() {
    if (this.state.hasError) {
      return (
        <div className="p-8 text-center">
          <div className="text-6xl mb-4">‚ö†Ô∏è</div>
          <h3 className="text-xl font-bold text-gray-800 mb-2">
            Calendar Temporarily Unavailable
          </h3>
          <p className="text-gray-600 mb-6">
            Please try booking directly through Calendly
          </p>
          <a 
            href={this.props.calendlyUrl}
            target="_blank"
            rel="noopener noreferrer"
            className="inline-block px-6 py-3 bg-[#FF9900] text-white rounded-lg font-semibold"
          >
            Book on Calendly
          </a>
        </div>
      );
    }
    return this.props.children;
  }
}
```

**Calendly Setup Checklist** (for each mentor):
1. Log into Calendly account
2. Create three event types: 15min, 30min, 60min
3. For each event type:
   - Enable "Hide event type owner's name and email"
   - Add custom questions: "Timezone" and "LinkedIn Profile"
   - Set buffer times between meetings
   - Connect to Microsoft Teams/Google Calendar
   - Customize confirmation page: "Your session with [mentor name] is confirmed!"
4. Copy exact URLs and save to database

**Track Every Interaction**:
```javascript
// When "Book a Meeting" button is clicked
async function handleBookClick(mentorId, menteeId) {
  // Create initial booking record
  await fetch('/api/bookings', {
    method: 'POST',
    body: JSON.stringify({
      mentor_id: mentorId,
      mentee_id: menteeId,
      status: 'clicked',
      clicked_at: new Date().toISOString()
    })
  });
  
  // Track analytics event
  trackEvent('book_meeting_clicked', {
    mentor_id: mentorId,
    mentee_id: menteeId
  });
  
  // Open modal
  setShowBookingModal(true);
}
```

---

### 2. Amazon Logo - Replace with White Version

**Current Problem**: The black Amazon logo is being used in the navbar, which doesn't provide proper contrast and doesn't follow Amazon's white-label guidelines for dark backgrounds.

**Solution**: 

Replace the logo in your navigation component:
```jsx
// In Header.jsx or Navbar.jsx
<header className="bg-[#232F3E] border-b border-gray-700">
  <div className="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
    
    {/* Logo Section */}
    <div className="flex items-center gap-4">
      <img 
        src="/assets/amazon-logo-white.svg" 
        alt="Amazon" 
        className="h-8 w-auto"
      />
      <div className="border-l border-gray-600 pl-4 ml-4">
        <h1 className="text-white font-bold text-xl">MentorConnect</h1>
        <p className="text-gray-400 text-xs">Amazon Egypt</p>
      </div>
    </div>
    
    {/* Navigation */}
    <nav className="flex items-center gap-8">
      <a href="/mentors" className="text-gray-300 hover:text-white">
        Browse Mentors
      </a>
      <a href="/analytics" className="text-gray-300 hover:text-white flex items-center gap-2">
        üìä Analytics
      </a>
      <a href="/onboard/mentor" className="text-gray-300 hover:text-white flex items-center gap-2">
        üë§ Become a Mentor
      </a>
      <a href="/onboard/mentee" className="px-6 py-2 bg-[#FF9900] text-white rounded-lg font-semibold hover:bg-[#e88b00]">
        Join as Mentee
      </a>
    </nav>
    
  </div>
</header>
```

**Brand Guidelines Compliance**:
- Minimum clear space around logo: 1.5x the height of the smile arrow
- Never stretch or distort the logo
- Never change logo colors (only use official white or black versions)
- Always use SVG format for crisp rendering at any size

If you don't have the white logo SVG, use this fallback approach:
```jsx
<div className="flex items-center gap-2">
  <svg width="100" height="30" viewBox="0 0 100 30" className="text-white fill-current">
    {/* Simplified Amazon logo */}
    <text x="0" y="20" className="font-bold text-2xl">amazon</text>
    <path d="M10,25 Q50,28 90,25" stroke="#FF9900" strokeWidth="3" fill="none"/>
  </svg>
</div>
```

---

### 3. Analytics Dashboard - Populate with Realistic Data

**Current Problem**: The analytics dashboard is completely empty, making it impossible to demonstrate the platform's tracking and reporting capabilities to Amazon.

**Solution**: 

Create a comprehensive mock data file that simulates 3 months of platform activity:

```javascript
// src/data/mockAnalytics.js

export const MOCK_ANALYTICS_DATA = {
  // Summary KPIs
  kpis: {
    total_bookings: 247,
    completed_meetings: 189,
    canceled_meetings: 23,
    upcoming_meetings: 35,
    unique_mentees: 94,
    unique_mentors: 18,
    conversion_rate: 0.68, // 68% of clicks result in bookings
    avg_rating: 4.7,
    total_ratings: 156
  },
  
  // Bookings trend over last 12 weeks
  bookings_over_time: [
    { date: '2024-08-26', week: 'Week 1', clicks: 15, bookings: 8, completed: 6 },
    { date: '2024-09-02', week: 'Week 2', clicks: 22, bookings: 14, completed: 12 },
    { date: '2024-09-09', week: 'Week 3', clicks: 18, bookings: 12, completed: 10 },
    { date: '2024-09-16', week: 'Week 4', clicks: 28, bookings: 19, completed: 15 },
    { date: '2024-09-23', week: 'Week 5', clicks: 31, bookings: 22, completed: 18 },
    { date: '2024-09-30', week: 'Week 6', clicks: 26, bookings: 18, completed: 16 },
    { date: '2024-10-07', week: 'Week 7', clicks: 35, bookings: 24, completed: 19 },
    { date: '2024-10-14', week: 'Week 8', clicks: 29, bookings: 21, completed: 18 },
    { date: '2024-10-21', week: 'Week 9', clicks: 38, bookings: 27, completed: 22 },
    { date: '2024-10-28', week: 'Week 10', clicks: 42, bookings: 31, completed: 25 },
    { date: '2024-11-04', week: 'Week 11', clicks: 45, bookings: 33, completed: 28 },
    { date: '2024-11-11', week: 'Week 12', clicks: 48, bookings: 36, completed: 0 } // Current week
  ],
  
  // Top performing mentors
  top_mentors: [
    { 
      id: 1,
      name: 'Sarah Al-Mansoori', 
      position: 'Senior Engineering Manager',
      booking_count: 34, 
      completed_count: 29,
      avg_rating: 4.9,
      total_ratings: 24,
      photo_url: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=200'
    },
    { 
      id: 2,
      name: 'Ahmed Hassan', 
      position: 'Senior Product Manager',
      booking_count: 28, 
      completed_count: 24,
      avg_rating: 4.8,
      total_ratings: 20,
      photo_url: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?w=200'
    },
    { 
      id: 3,
      name: 'Layla Mahmoud', 
      position: 'Engineering Manager, AWS',
      booking_count: 25, 
      completed_count: 21,
      avg_rating: 4.7,
      total_ratings: 18,
      photo_url: 'https://images.unsplash.com/photo-1580489944761-15a19d654956?w=200'
    },
    { 
      id: 4,
      name: 'Omar Khalil', 
      position: 'Senior UX Designer',
      booking_count: 22, 
      completed_count: 19,
      avg_rating: 4.8,
      total_ratings: 16,
      photo_url: 'https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?w=200'
    },
    { 
      id: 5,
      name: 'Fatima Nour', 
      position: 'Principal Architect',
      booking_count: 19, 
      completed_count: 17,
      avg_rating: 4.9,
      total_ratings: 15,
      photo_url: 'https://images.unsplash.com/photo-1594744803329-e58b31de8bf5?w=200'
    }
  ],
  
  // Distribution by expertise area
  specialization_distribution: [
    { name: 'AI & Machine Learning', value: 42, color: '#5B6EE1', count: 42 },
    { name: 'Cloud Computing', value: 35, color: '#26B5A8', count: 35 },
    { name: 'Product Management', value: 28, color: '#FF9900', count: 28 },
    { name: 'UX/UI Design', value: 24, color: '#EF4444', count: 24 },
    { name: 'Engineering Leadership', value: 19, color: '#8B5CF6', count: 19 },
    { name: 'Web3 & Blockchain', value: 16, color: '#F59E0B', count: 16 },
    { name: 'FinTech', value: 14, color: '#10B981', count: 14 }
  ],
  
  // Industry breakdown
  industry_distribution: [
    { name: 'Technology', value: 38, percentage: 38 },
    { name: 'E-commerce', value: 25, percentage: 25 },
    { name: 'Financial Services', value: 18, percentage: 18 },
    { name: 'Consumer Goods', value: 12, percentage: 12 },
    { name: 'Entertainment & Media', value: 7, percentage: 7 }
  ],
  
  // Mentee type breakdown
  mentee_type_distribution: [
    { type: 'Individual', count: 67, percentage: 71 },
    { type: 'Organization', count: 27, percentage: 29 }
  ],
  
  // Language preferences
  language_distribution: [
    { language: 'English', count: 94, flag: 'üá¨üáß' },
    { language: 'Arabic', count: 78, flag: 'üá¶üá™' },
    { language: 'French', count: 12, flag: 'üá´üá∑' }
  ],
  
  // Ratings breakdown
  ratings_distribution: [
    { stars: 5, count: 98, percentage: 63 },
    { stars: 4, count: 42, percentage: 27 },
    { stars: 3, count: 12, percentage: 8 },
    { stars: 2, count: 3, percentage: 2 },
    { stars: 1, count: 1, percentage: 0.6 }
  ],
  
  // Recent bookings (for detailed table)
  recent_bookings: [
    {
      id: 1,
      mentor_name: 'Sarah Al-Mansoori',
      mentee_name: 'Youssef Ibrahim',
      mentee_type: 'Individual',
      specialization: 'AI & Machine Learning',
      duration: 30,
      clicked_at: '2024-11-15T09:23:00Z',
      scheduled_at: '2024-11-18T14:00:00Z',
      status: 'scheduled',
      rating: null
    },
    {
      id: 2,
      mentor_name: 'Ahmed Hassan',
      mentee_name: 'Nour Tech Solutions',
      mentee_type: 'Organization',
      specialization: 'Product Management',
      duration: 60,
      clicked_at: '2024-11-14T16:45:00Z',
      scheduled_at: '2024-11-17T10:00:00Z',
      status: 'scheduled',
      rating: null
    },
    {
      id: 3,
      mentor_name: 'Layla Mahmoud',
      mentee_name: 'Hana Mostafa',
      mentee_type: 'Individual',
      specialization: 'Cloud Computing',
      duration: 30,
      clicked_at: '2024-11-12T11:20:00Z',
      scheduled_at: '2024-11-14T15:30:00Z',
      status: 'completed',
      rating: 5
    },
    // Add 20+ more realistic entries...
  ],
  
  // Conversion funnel
  conversion_funnel: [
    { stage: 'Mentor Profile Views', count: 1847, percentage: 100 },
    { stage: 'Book Meeting Clicks', count: 362, percentage: 20 },
    { stage: 'Calendar Opened', count: 312, percentage: 17 },
    { stage: 'Time Slot Selected', count: 268, percentage: 15 },
    { stage: 'Meeting Scheduled', count: 247, percentage: 13 }
  ]
};
```

Now create the analytics dashboard component:

```jsx
// src/pages/Analytics.jsx
import { LineChart, Line, BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, Tooltip, ResponsiveContainer, Legend } from 'recharts';
import { MOCK_ANALYTICS_DATA } from '../data/mockAnalytics';

export default function AnalyticsDashboard() {
  const [dateRange, setDateRange] = useState('12weeks');
  const [selectedMentor, setSelectedMentor] = useState('all');
  
  const data = MOCK_ANALYTICS_DATA;
  
  return (
    <div className="min-h-screen bg-gray-50">
      
      {/* Header */}
      <div className="bg-[#232F3E] text-white py-8">
        <div className="max-w-7xl mx-auto px-6">
          <h1 className="text-4xl font-bold mb-2">Analytics Dashboard</h1>
          <p className="text-gray-300">Track mentorship program performance and engagement</p>
        </div>
      </div>
      
      {/* Filters */}
      <div className="bg-white border-b border-gray-200">
        <div className="max-w-7xl mx-auto px-6 py-4 flex gap-4">
          <select 
            value={dateRange} 
            onChange={(e) => setDateRange(e.target.value)}
            className="px-4 py-2 border border-gray-300 rounded-lg"
          >
            <option value="7days">Last 7 Days</option>
            <option value="30days">Last 30 Days</option>
            <option value="12weeks">Last 12 Weeks</option>
            <option value="all">All Time</option>
          </select>
          
          <select 
            value={selectedMentor}
            onChange={(e) => setSelectedMentor(e.target.value)}
            className="px-4 py-2 border border-gray-300 rounded-lg"
          >
            <option value="all">All Mentors</option>
            {data.top_mentors.map(m => (
              <option key={m.id} value={m.id}>{m.name}</option>
            ))}
          </select>
          
          <button className="ml-auto px-6 py-2 bg-[#FF9900] text-white rounded-lg font-semibold hover:bg-[#e88b00]">
            üì• Export CSV
          </button>
        </div>
      </div>
      
      <div className="max-w-7xl mx-auto px-6 py-8">
        
        {/* KPI Cards */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          
          <div className="bg-white rounded-xl shadow-md p-6 border-l-4 border-[#FF9900]">
            <div className="flex items-center justify-between mb-2">
              <p className="text-sm font-semibold text-gray-600">Total Bookings</p>
              <span className="text-2xl">üìÖ</span>
            </div>
            <p className="text-4xl font-bold text-[#232F3E] mb-1">
              {data.kpis.total_bookings}
            </p>
            <p className="text-sm text-green-600 font-semibold">
              ‚Üë 23% from last period
            </p>
          </div>
          
          <div className="bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500">
            <div className="flex items-center justify-between mb-2">
              <p className="text-sm font-semibold text-gray-600">Completed Meetings</p>
              <span className="text-2xl">‚úÖ</span>
            </div>
            <p className="text-4xl font-bold text-[#232F3E] mb-1">
              {data.kpis.completed_meetings}
            </p>
            <p className="text-sm text-gray-500">
              {Math.round(data.kpis.completed_meetings / data.kpis.total_bookings * 100)}% completion rate
            </p>
          </div>
          
          <div className="bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
            <div className="flex items-center justify-between mb-2">
              <p className="text-sm font-semibold text-gray-600">Unique Mentees</p>
              <span className="text-2xl">üë•</span>
            </div>
            <p className="text-4xl font-bold text-[#232F3E] mb-1">
              {data.kpis.unique_mentees}
            </p>
            <p className="text-sm text-gray-500">
              Across {data.kpis.unique_mentors} mentors
            </p>
          </div>
          
          <div className="bg-white rounded-xl shadow-md p-6 border-l-4 border-purple-500">
            <div className="flex items-center justify-between mb-2">
              <p className="text-sm font-semibold text-gray-600">Average Rating</p>
              <span className="text-2xl">‚≠ê</span>
            </div>
            <p className="text-4xl font-bold text-[#232F3E] mb-1">
              {data.kpis.avg_rating.toFixed(1)}
            </p>
            <p className="text-sm text-gray-500">
              From {data.kpis.total_ratings} reviews
            </p>
          </div>
          
        </div>
        
        {/* Bookings Trend Chart */}
        <div className="bg-white rounded-xl shadow-md p-6 mb-8">
          <h2 className="text-2xl font-bold text-[#232F3E] mb-6">
            Booking Trends Over Time
          </h2>
          <ResponsiveContainer width="100%" height={350}>
            <LineChart data={data.bookings_over_time}>
              <XAxis 
                dataKey="week" 
                stroke="#6B7280"
                style={{ fontSize: '12px' }}
              />
              <YAxis stroke="#6B7280" />
              <Tooltip 
                contentStyle={{ 
                  backgroundColor: '#232F3E', 
                  border: 'none',
                  borderRadius: '8px',
                  color: 'white'
                }}
              />
              <Legend />
              <Line 
                type="monotone" 
                dataKey="clicks" 
                stroke="#9CA3AF" 
                strokeWidth={2}
                name="Click Events"
                dot={{ fill: '#9CA3AF', r: 4 }}
              />
              <Line 
                type="monotone" 
                dataKey="bookings" 
                stroke="#FF9900" 
                strokeWidth={3}
                name="Bookings Scheduled"
                dot={{ fill: '#FF9900', r: 5 }}
              />
              <Line 
                type="monotone" 
                dataKey="completed" 
                stroke="#10B981" 
                strokeWidth={2}
                name="Completed Meetings"
                dot={{ fill: '#10B981', r: 4 }}
              />
            </LineChart>
          </ResponsiveContainer>
        </div>
        
        {/* Two column layout */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
          
          {/* Top Mentors */}
          <div className="bg-white rounded-xl shadow-md p-6">
            <h2 className="text-2xl font-bold text-[#232F3E] mb-6">
              Top Performing Mentors
            </h2>
            <div className="space-y-4">
              {data.top_mentors.map((mentor, index) => (
                <div key={mentor.id} className="flex items-center gap-4 p-4 rounded-lg hover:bg-gray-50 transition">
                  <div className="text-2xl font-bold text-gray-400 w-8">
                    #{index + 1}
                  </div>
                  <img 
                    src={mentor.photo_url}
                    alt={mentor.name}
                    className="w-14 h-14 rounded-full object-cover"
                  />
                  <div className="flex-1">
                    <h3 className="font-bold text-[#232F3E]">{mentor.name}</h3>
                    <p className="text-sm text-gray-600">{mentor.position}</p>
                  </div>
                  <div className="text-right">
                    <p className="text-2xl font-bold text-[#FF9900]">
                      {mentor.booking_count}
                    </p>
                    <p className="text-xs text-gray-500">bookings</p>
                    <div className="flex items-center gap-1 mt-1">
                      <span className="text-yellow-500">‚≠ê</span>
                      <span className="text-sm font-semibold">
                        {mentor.avg_rating}
                      </span>